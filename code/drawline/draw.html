<!doctype html>
<html>
<head>
    <title>划线</title>
    <meta http-equiv="x-ua-compatible" content="ie=9"/>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.4/raphael-min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript">
    var paper;
    $(function () {
        xOffset =  50
        yOffset =  50
        width   =  800
        height  =  600
    	paper = new Raphael("drawline", width, height);
    	c = paper.rect(xOffset, yOffset, width, height).attr({
    			fill: "#29ECC7",
    			stroke: "none",
    			opacity: .8
    		});

    	startPoint = {}
    	endPoint = {}

    	startDragFunction = function (x, y, e) {
    		startPoint.x = x ;
    		startPoint.y = y ;

    	}
    	endDragFunction = function (x, y, e) {
            x1 = startPoint.x;
            y1 = startPoint.y;
            x2 = endPoint.x + x1;
            y2 = endPoint.y + y1;
    		paper.path("M" + x1 + "," + y1 + "L" + x2 + "," + y2);
    		alert(startPoint.x.toString() + '   ' + startPoint.y.toString() + '   ' + (startPoint.x + endPoint.x).toString() + '   ' + (startPoint.y + endPoint.y).toString())
    	}
    	draggingFunction = function (x, y) {
    		endPoint.x = x ;
    		endPoint.y = y ;

    	}
    	paper.set(c).drag(draggingFunction, startDragFunction, endDragFunction);
    	$("#clear").click(function () {
    		paper.clear();
    		c = paper.rect(xOffset, yOffset, width, height).attr({
    				fill: "#29ECC7",
    				stroke: "none",
    				opacity: .8
    			});
    		paper.set(c).drag(draggingFunction, startDragFunction, endDragFunction);
    	});
    });
    function mouseMove(ev) {
    	Ev = ev || window.event;
    	var mousePos = mouseCoords(ev);
    	document.getElementById("xxx").value = mousePos.x;
    	document.getElementById("yyy").value = mousePos.y;
    }
    function mouseCoords(ev) {
    	if (ev.pageX || ev.pageY) {
    		return {
    			x: ev.pageX,
    			y: ev.pageY
    		};
    	}
    	return {
    		x: ev.clientX + document.body.scrollLeft - document.body.clientLeft,
    		y: ev.clientY + document.body.scrollTop - document.body.clientTop
    	};
    }
    document.onmousemove = mouseMove;
    </script>
</head>
<body> 
    <div id="header">
            <h1 id="title">划线界面</h1>
            鼠标X轴: <input id=xxx type=text> 鼠标Y轴: <input id=yyy type=text>
            <button id="clear" value="clear">清除</button>
            <div id="footer"></div>
        </div>
    <div id="drawline">
       
    </div>
</body>
</html>